I am experiencing SSL certificate errors when running large queries using odbc from Tosca in Snowflake. Some investigation shows that the issue occurs when the Snowflake driver retrieves results from Amazon S3 stage endpoints. One of these endpoints (s3-us-west-2.amazonaws.com) cannot resolve in our network, causing failures.

Please allow outbound access to the following hosts and ports, and ensure no SSL interception for these endpoints:

 

Snowflake Core (443):

yyb42718.snowflakecomputing.com
cpkc-devbi1.snowflakecomputing.com
sfc-repo.snowflakecomputing.com
client-telemetry.snowflakecomputing.com
app.snowflake.com
apps-api.c1.us-west-2.aws.app.snowflake.com
Stage Endpoints (443):

sfc-prod3-ds1-97-customer-stage.s3.amazonaws.com
sfc-prod3-ds1-97-customer-stage.s3.us-west-2.amazonaws.com
sfc-prod3-ds1-97-customer-stage.s3-us-west-2.amazonaws.com ‚Üê Currently blocked
OCSP/CRL (80):

ocsp.snowflakecomputing.com
ocsp.digicert.com
ocsp.rootg2.amazontrust.com
ocsp.r2m01.amazontrust.com
ocsp.r2m02.amazontrust.com
ocsp.r2m03.amazontrust.com
ocsp.r2m04.amazontrust.com
ocsp.rootca1.amazontrust.com
ocsp.sca1b.amazontrust.com
crl.r2m01.amazontrust.com
crl.r2m04.amazontrust.com
crl.rootg2.amazontrust.com
crl.rootca1.amazontrust.com
crl3.digicert.com
crl4.digicert.com
 

Key Requirements:

Allow outbound HTTPS (443) to Snowflake and stage endpoints.
Allow outbound HTTP (80) to OCSP and CRL endpoints for certificate validation.
Disable SSL interception for these hosts (Snowflake drivers require the original certificate chain).
Please confirm once these changes are applied so we can retest.
